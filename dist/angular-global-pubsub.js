!function(r){function e(r,e){function u(){return r.__globalPubSubRegistry||(r.__globalPubSubRegistry={}),r.__globalPubSubRegistry}function t(r){return u()[r]||(u()[r]={}),u()[r]}function n(r,u,n){return t(r)[u]&&e.warn("Callback is already associated to event",u,r),t(r)[u]=n,t(r)[u]}function c(r,u){t(r)[u]||e.warn("No callback is not associated to this event",u,r);var n=t(r);if(n){var c=n[u];return delete n[u],c}}return r.__globalPubSub=r.__globalPubSub||{publish:function(r,u){try{var n=t(r);n&&Object.keys(n).forEach(function(r){var t=n[r];if(t)try{t(u)}catch(c){e.log(c)}})}catch(c){e.error("An error has occured in the pubsub service.",c)}},subscribe:function(r,u,t){try{return n(r,u,t)}catch(c){e.error("An error has occured in the pubsub service",c)}},unsubscribe:function(r,u){try{return c(r,u)}catch(t){e.error("An error has occured in the pubsub service",t)}}},r.__globalPubSub}r.module("tw.utilities",[]).service("PubSubService",["$window","$log",e])}(window.angular);
